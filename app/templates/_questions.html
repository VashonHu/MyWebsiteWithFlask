<ul class="questions">
    {% for question in questions %}
    <li class="question">
        <div class="question-content">
            <div class="question-date">{{ moment(question.timestamp).fromNow() }}</div>
            <div class="question-author"><a href="{{ url_for('.user', username=question.author.username) }}">{{ question.author.username }}提问：</a></div>
            <div class="question-body">
                {% if question.body_html %}
                    {{ question.body_html | safe }}
                {% else %}
                    {{ question.body }}
                {% endif %}
            </div>
            <div class="question-footer">
                {% if current_user == question.author %}
                <a href="{{ url_for('.edit_question', id=question.id) }}">
                    <span class="label label-primary">编辑</span>
                </a>
                {% elif current_user.is_administrator() %}
                <a href="{{ url_for('.edit_question', id=question.id) }}">
                    <span class="label label-danger">编辑 [管理员]</span>
                </a>
                {% endif %}
                <a href="{{ url_for('.question', id=question.id) }}">
                    <span class="label label-default">全部回答[{{ question.answers.count() }}]</span>
                </a>
                <a href="{{ url_for('.question', id=question.id) }}">
                    <span class="label label-default">我来回答</span>
                </a>
            </div>
        </div>
    </li>
    <ul class="answers">
        {% set answers = question.answers.order_by(Answer.timestamp.desc()).limit(row).all() %}
        {% for answer in answers %}

        <ul class="answer">
            <div class="answer-content">
                <div class="answer-date">{{ moment(answer.timestamp).fromNow() }}</div>
                <div class="answer-author"><a href="{{ url_for('.user', username=answer.author.username) }}">{{ answer.author.username }}回答：</a></div>
                <div class="answer-body">
                    {% if answer.body_html %}
                        {{ answer.body_html | safe }}
                    {% else %}
                        {{ answer.body }}
                    {% endif %}
                </div>
                <div class="answer-footer">
                    {% if current_user == answer.author %}
                    <a href="{{ url_for('.edit_answer', id=answer.id) }}">
                        <span class="label label-primary">编辑</span>
                    </a>
                    {% elif current_user.is_administrator() %}
                    <a href="{{ url_for('.edit_answer', id=answer.id) }}">
                        <span class="label label-danger">编辑 [管理员]</span>
                    </a>
                    {% endif %}
                    <a href="{{ url_for('.vote', id=answer.id)}}#answer.id ">
                        <span class="label label-primary">点赞({{ answer.votes.count() }})</span>
                    </a>
                </div>
            </div>
        </ul>
        {% endfor %}
        <div class="answer-footer_max">

        </div>
    </ul>
    {% endfor %}
</ul>
